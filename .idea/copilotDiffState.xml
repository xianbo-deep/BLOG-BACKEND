<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/README.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/README.md" />
              <option name="originalContent" value="# Blog-Backend&#10;&#10;这是一个基于 Go 语言和 Gin 框架开发的博客后台服务系统。主要用于博客站点的流量统计、性能监控以及后台管理功能。&#10;&#10;## 项目目的&#10;&#10;本项目旨在为博客提供一个轻量级、高性能的后端服务，核心目标包括：&#10;&#10;1.  **流量统计**：收集并分析访客数据，包括 PV/UV、地理位置、设备信息等。&#10;2.  **性能监控**：监控页面加载延迟，识别慢加载页面，辅助优化前端性能。&#10;3.  **后台管理**：提供可视化的数据看板，展示访问趋势、访客地图及详细访问日志。&#10;&#10;## 技术栈&#10;&#10;-   **编程语言**: Go (1.24+)&#10;-   **Web 框架**: Gin&#10;-   **数据库**: PostgreSQL&#10;-   **ORM**: GORM&#10;-   **缓存**: Redis&#10;-   **认证**: JWT (JSON Web Token)&#10;-   **定时任务**: Robfig Cron&#10;-   **IP 地理位置**: GeoIP2&#10;&#10;## 功能模块&#10;&#10;### 1. 公共接口 (Public)&#10;-   **数据采集 (`/blog/collect`)**: 接收前端上报的访问数据，包括时间戳、路径、延迟、IP、User-Agent 等信息。&#10;&#10;### 2. 管理后台 (Admin)&#10;后台接口需要 JWT 认证。&#10;&#10;-   **仪表盘 (`/admin/dashboard`)**:&#10;    -   数据概览 (Summary): 获取总访问量、今日访问量等概览数据。&#10;    -   访问趋势 (Trend): 展示近期的访问趋势图表数据。&#10;    -   洞察分析 (Insights): 提供基于数据的深度分析。&#10;-   **访问日志 (`/admin/accesslog`)**:&#10;    -   日志查询 (`/logs`): 分页查询详细的访客记录。&#10;-   **性能监控 (`/admin/performance`)**:&#10;    -   平均延迟 (`/averageDelay`): 统计页面的平均加载延迟。&#10;    -   慢页面分析 (`/slowPages`): 识别加载速度较慢的页面。&#10;-   **页面分析 (`/admin/analysis`)**:&#10;    -   全站统计 (`/total`): 全站页面的访问统计。&#10;    -   今日统计 (`/today`): 今日页面的访问统计。&#10;-   **访客地图 (`/admin/visitormap`)**:&#10;    -   世界地图 (`/map`): 基于 IP 的全球访客分布。&#10;    -   中国地图 (`/chineseMap`): 基于 IP 的中国访客分布。&#10;&#10;### 3. 定时任务&#10;-   **数据同步**: 每日凌晨自动将 Redis 中的缓存数据同步到 PostgreSQL 数据库，确保数据持久化。&#10;&#10;## 项目结构&#10;&#10;```text&#10;Blog-Backend/&#10;├── api/            # Serverless 入口 (如 Vercel)&#10;├── consts/         # 常量定义 (环境配置, 业务常量)&#10;├── core/           # 核心组件初始化 (数据库, Redis, GeoIP)&#10;├── dto/            # 数据传输对象 (Request/Response 定义)&#10;├── internal/       # 内部业务逻辑&#10;│   ├── controller/ # 控制器层 (处理 HTTP 请求)&#10;│   ├── dao/        # 数据访问层 (数据库操作)&#10;│   ├── service/    # 业务逻辑层&#10;│   └── task/       # 定时任务 (数据同步)&#10;├── middleware/     # 中间件 (认证, CORS)&#10;├── model/          # 数据库模型定义&#10;├── router/         # 路由配置&#10;├── thirdparty/     # 第三方服务集成 (GitHub)&#10;└── utils/          # 工具函数 (GeoIP, JWT, 分页)&#10;```&#10;│   ├── service/    # 业务逻辑层&#10;│   └── dao/        # 数据访问层&#10;├── middleware/     # Gin 中间件 (Auth, CORS)&#10;├── model/          # 数据库模型定义&#10;├── router/         # 路由配置&#10;└── utils/          # 工具函数 (JWT, 分页器等)&#10;```&#10;&#10;" />
              <option name="updatedContent" value="# Blog-Backend&#10;&#10;这是一个基于 Go 语言和 Gin 框架开发的博客后台服务系统。主要用于博客站点的流量统计、性能监控以及后台管理功能。&#10;&#10;## 项目目的&#10;&#10;本项目旨在为博客提供一个轻量级、高性能的后端服务，核心目标包括：&#10;&#10;1.  **流量统计**：收集并分析访客数据，包括 PV/UV、地理位置、设备信息等。&#10;2.  **性能监控**：监控页面加载延迟，识别慢加载页面，辅助优化前端性能。&#10;3.  **后台管理**：提供可视化的数据看板，展示访问趋势、访客地图及详细访问日志。&#10;&#10;## 技术栈&#10;&#10;-   **编程语言**: Go (1.24+)&#10;-   **Web 框架**: Gin&#10;-   **数据库**: PostgreSQL&#10;-   **ORM**: GORM&#10;-   **缓存**: Redis&#10;-   **认证**: JWT (JSON Web Token)&#10;-   **定时任务**: Robfig Cron&#10;-   **IP 地理位置**: GeoIP2&#10;&#10;## 功能模块&#10;&#10;### 1. 公共接口 (Public)&#10;-   **数据采集 (`/blog/collect`)**: 接收前端上报的访问数据，包括时间戳、路径、延迟、IP、User-Agent 等信息。&#10;&#10;### 2. 管理后台 (Admin)&#10;后台接口需要 JWT 认证。&#10;&#10;-   **仪表盘 (`/admin/dashboard`)**:&#10;    -   数据概览 (Summary): 获取总访问量、今日访问量等概览数据。&#10;    -   访问趋势 (Trend): 展示近期的访问趋势图表数据。&#10;    -   洞察分析 (Insights): 提供基于数据的深度分析。&#10;-   **访问日志 (`/admin/accesslog`)**:&#10;    -   日志查询 (`/logs`): 分页查询详细的访客记录。&#10;-   **性能监控 (`/admin/performance`)**:&#10;    -   平均延迟 (`/averageDelay`): 统计页面的平均加载延迟。&#10;    -   慢页面分析 (`/slowPages`): 识别加载速度较慢的页面。&#10;-   **页面分析 (`/admin/analysis`)**:&#10;    -   全站统计 (`/total`): 全站页面的访问统计。&#10;    -   今日统计 (`/today`): 今日页面的访问统计。&#10;-   **访客地图 (`/admin/visitormap`)**:&#10;    -   世界地图 (`/map`): 基于 IP 的全球访客分布。&#10;    -   中国地图 (`/chineseMap`): 基于 IP 的中国访客分布。&#10;&#10;### 3. 定时任务&#10;-   **数据同步**: 每日凌晨自动将 Redis 中的缓存数据同步到 PostgreSQL 数据库，确保数据持久化。&#10;&#10;## 项目结构&#10;&#10;```text&#10;Blog-Backend/&#10;├── api/            # Serverless 入口 (如 Vercel)&#10;├── consts/         # 常量定义 (环境配置, 业务常量)&#10;├── core/           # 核心组件初始化 (数据库, Redis, GeoIP)&#10;├── dto/            # 数据传输对象 (Request/Response 定义)&#10;├── internal/       # 内部业务逻辑&#10;│   ├── controller/ # 控制器层 (处理 HTTP 请求)&#10;│   ├── dao/        # 数据访问层 (数据库操作)&#10;│   ├── service/    # 业务逻辑层&#10;│   └── task/       # 定时任务 (数据同步)&#10;├── middleware/     # 中间件 (认证, CORS)&#10;├── model/          # 数据库模型定义&#10;├── router/         # 路由配置&#10;├── thirdparty/     # 第三方服务集成 (GitHub)&#10;└── utils/          # 工具函数 (GeoIP, JWT, 分页)&#10;```&#10;&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>